---
const technologies = [
  { name: "HTML", icon: "/tech/html.svg", category: "Frontend", color: "from-orange-500 to-red-500" },
  { name: "CSS", icon: "/tech/css.svg", category: "Frontend", color: "from-blue-500 to-cyan-500" },
  { name: "JavaScript", icon: "/tech/javascript.svg", category: "Frontend", color: "from-yellow-400 to-yellow-600" },
  { name: "TypeScript", icon: "/tech/typescript.svg", category: "Frontend", color: "from-blue-600 to-blue-800" },
  { name: "React", icon: "/tech/react.svg", category: "Frontend", color: "from-cyan-400 to-blue-500" },
  { name: "Node.js", icon: "/tech/node.svg", category: "Backend", color: "from-green-500 to-emerald-600" },
  { name: "Python", icon: "/tech/python.svg", category: "Backend", color: "from-blue-500 to-yellow-500" },
  { name: "Git", icon: "/tech/git.svg", category: "Tools", color: "from-orange-600 to-red-600" },
  { name: "MongoDB", icon: "/tech/mongodb.svg", category: "Database", color: "from-green-600 to-emerald-700" },
  { name: "PostgreSQL", icon: "/tech/postgresql.svg", category: "Database", color: "from-blue-600 to-indigo-700" },
  { name: "Docker", icon: "/tech/docker.svg", category: "DevOps", color: "from-blue-500 to-cyan-600" },
  { name: "Kubernetes", icon: "/tech/kubernetes.svg", category: "DevOps", color: "from-blue-600 to-indigo-700" },
  { name: "Next.js", icon: "/tech/nextjs.svg", category: "Frontend", color: "from-gray-900 to-black" },
  { name: "Astro", icon: "/tech/astro.svg", category: "Frontend", color: "from-orange-500 to-pink-500" },
  { name: "Tailwind CSS", icon: "/tech/tailwindcss.svg", category: "Frontend", color: "from-cyan-400 to-blue-500" },
  { name: "Bootstrap", icon: "/tech/bootstrap.svg", category: "Frontend", color: "from-purple-600 to-indigo-700" },
  { name: "Vue.js", icon: "/tech/vue.svg", category: "Frontend", color: "from-green-500 to-emerald-600" },
  { name: "Angular", icon: "/tech/angular.svg", category: "Frontend", color: "from-red-600 to-red-700" },
  { name: "NestJS", icon: "/tech/nestjs.svg", category: "Backend", color: "from-red-600 to-pink-600" },
];

// Triplicamos para un carrusel más fluido
const tripled = [...technologies, ...technologies, ...technologies];

// Función para obtener el color del badge basado en el color de la tecnología
function getBadgeColor(color: string) {
  // Extraer el color principal del gradiente
  if (color.includes("orange")) return "bg-orange-500/30 text-orange-800 dark:text-orange-200 border-orange-500/50";
  if (color.includes("red")) return "bg-red-500/30 text-red-800 dark:text-red-200 border-red-500/50";
  if (color.includes("blue") && color.includes("cyan")) return "bg-cyan-500/30 text-cyan-800 dark:text-cyan-200 border-cyan-500/50";
  if (color.includes("blue")) return "bg-blue-500/30 text-blue-800 dark:text-blue-200 border-blue-500/50";
  if (color.includes("yellow")) return "bg-yellow-500/30 text-yellow-800 dark:text-yellow-200 border-yellow-500/50";
  if (color.includes("green") || color.includes("emerald")) return "bg-emerald-500/30 text-emerald-800 dark:text-emerald-200 border-emerald-500/50";
  if (color.includes("purple") || color.includes("indigo")) return "bg-purple-500/30 text-purple-800 dark:text-purple-200 border-purple-500/50";
  if (color.includes("pink")) return "bg-pink-500/30 text-pink-800 dark:text-pink-200 border-pink-500/50";
  if (color.includes("gray") || color.includes("black")) return "bg-gray-500/30 text-gray-800 dark:text-gray-200 border-gray-500/50";
  return "bg-gray-500/30 text-gray-800 dark:text-gray-200 border-gray-500/50";
}
---

<section class="relative w-full overflow-hidden py-12">
  <!-- Carrusel principal - Minimalist -->
  <div class="relative mb-8">
    <div class="flex gap-4 animate-marquee-smooth">
      {tripled.map((tech, index) => (
        <div
          class="flex-shrink-0 group"
        >
          <div class="tech-card relative flex flex-col items-center justify-center w-32 h-32 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
            <!-- Icon -->
            <div class="mb-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg group-hover:scale-110 transition-transform duration-300">
              <img
                src={tech.icon}
                alt={`${tech.name} icon`}
                class="w-10 h-10 object-contain"
                loading="lazy"
              />
            </div>
            
            <!-- Tech name -->
            <span class="text-xs font-semibold text-gray-700 dark:text-gray-300 text-center px-2">
              {tech.name}
            </span>
          </div>
        </div>
      ))}
    </div>
  </div>
  
  <!-- Carrusel secundario (dirección opuesta) - Minimalist -->
  <div class="relative">
    <div class="flex gap-4 animate-marquee-reverse">
      {tripled.slice().reverse().map((tech, index) => (
        <div
          class="flex-shrink-0 group"
        >
          <div class="tech-card relative flex flex-col items-center justify-center w-32 h-32 rounded-xl bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700 transition-all duration-300 hover:shadow-lg hover:-translate-y-1">
            <!-- Icon -->
            <div class="mb-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg group-hover:scale-110 transition-transform duration-300">
              <img
                src={tech.icon}
                alt={`${tech.name} icon`}
                class="w-10 h-10 object-contain"
                loading="lazy"
              />
            </div>
            
            <!-- Tech name -->
            <span class="text-xs font-semibold text-gray-700 dark:text-gray-300 text-center px-2">
              {tech.name}
            </span>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  @keyframes marquee-smooth {
    0% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(-33.333%);
    }
  }

  @keyframes marquee-reverse {
    0% {
      transform: translateX(-33.333%);
    }
    100% {
      transform: translateX(0%);
    }
  }

  .animate-marquee-smooth {
    animation: marquee-smooth 50s linear infinite;
    display: flex;
    will-change: transform;
  }

  .animate-marquee-reverse {
    animation: marquee-reverse 45s linear infinite;
    display: flex;
    will-change: transform;
  }

  .tech-card {
    transition: all 0.3s ease;
    position: relative;
  }

  /* Pausa la animación al hacer hover en el contenedor */
  .animate-marquee-smooth:hover,
  .animate-marquee-reverse:hover {
    animation-play-state: paused;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .tech-card {
      width: 7rem;
      height: 7rem;
    }
    
    .tech-card img {
      width: 2.5rem;
      height: 2.5rem;
    }

    .animate-marquee-smooth {
      animation-duration: 35s;
    }

    .animate-marquee-reverse {
      animation-duration: 30s;
    }

    section {
      padding-top: 1.5rem;
      padding-bottom: 1.5rem;
    }
  }

  @media (max-width: 480px) {
    .tech-card {
      width: 6rem;
      height: 6rem;
    }
    
    .tech-card img {
      width: 2rem;
      height: 2rem;
    }

    .flex.gap-4 {
      gap: 0.75rem;
    }
  }

  /* Smooth scroll behavior */
  @media (prefers-reduced-motion: reduce) {
    .animate-marquee-smooth,
    .animate-marquee-reverse {
      animation: none;
    }
  }
</style>
