---
const technologies = [
  { name: "HTML", icon: "/tech/html.svg" },
  { name: "CSS", icon: "/tech/css.svg" },
  { name: "JavaScript", icon: "/tech/javascript.svg" },
  { name: "TypeScript", icon: "/tech/typescript.svg" },
  { name: "React", icon: "/tech/react.svg" },
  { name: "Node.js", icon: "/tech/node.svg" },
  { name: "Python", icon: "/tech/python.svg" },
  { name: "Git", icon: "/tech/git.svg" },
  { name: "MongoDB", icon: "/tech/mongodb.svg" },
  { name: "PostgreSQL", icon: "/tech/postgresql.svg" },
  { name: "Docker", icon: "/tech/docker.svg" },
  { name: "Kubernetes", icon: "/tech/kubernetes.svg" },
  { name: "Next.js", icon: "/tech/nextjs.svg" },
  { name: "Astro", icon: "/tech/astro.svg" },
  { name: "Tailwind CSS", icon: "/tech/tailwindcss.svg" },
  { name: "Bootstrap", icon: "/tech/bootstrap.svg" },
  { name: "Vue.js", icon: "/tech/vue.svg" },
  { name: "Angular", icon: "/tech/angular.svg" },
  { name: "NestJS", icon: "/tech/nestjs.svg" },
];

// Triplicamos para un carrusel más fluido
const tripled = [...technologies, ...technologies, ...technologies];
---

<div class="relative w-full overflow-hidden py-8">
  <!-- Gradientes para efecto fade -->
  
  
  <!-- Carrusel principal -->
  <div class="flex gap-6 animate-marquee-smooth">
    {tripled.map((tech, index) => (
      <div
        key={index}
        class="flex-shrink-0 group"
      >
        <div class="tech-card flex flex-col items-center justify-center min-w-[120px] p-4 rounded-xl border border-gray-300/30 dark:border-white/10 backdrop-blur-lg bg-white/20 dark:bg-white/5 shadow-lg hover:shadow-xl transition-all duration-300">
          <div class="relative overflow-hidden rounded-lg p-2 bg-white/50 dark:bg-gray-800/50 mb-3">
            <img
              src={tech.icon}
              alt={`Ícono de ${tech.name}`}
              class="h-12 w-12 object-contain transition-transform duration-300 group-hover:scale-110"
              loading="lazy"
            />
          </div>
          <span class="text-sm font-medium text-gray-800 dark:text-gray-100 text-center">
            {tech.name}
          </span>
        </div>
      </div>
    ))}
  </div>
  
  <!-- Carrusel secundario (dirección opuesta) -->
  <div class="flex gap-6 animate-marquee-reverse mt-6">
    {tripled.slice().reverse().map((tech, index) => (
      <div
        key={index}
        class="flex-shrink-0 group"
      >
        <div class="tech-card flex flex-col items-center justify-center min-w-[120px] p-4 rounded-xl border border-gray-300/30 dark:border-white/10 backdrop-blur-lg bg-white/20 dark:bg-white/5 shadow-lg hover:shadow-xl transition-all duration-300">
          <div class="relative overflow-hidden rounded-lg p-2 bg-white/50 dark:bg-gray-800/50 mb-3">
            <img
              src={tech.icon}
              alt={`Ícono de ${tech.name}`}
              class="h-12 w-12 object-contain transition-transform duration-300 group-hover:scale-110"
              loading="lazy"
            />
          </div>
          <span class="text-sm font-medium text-gray-800 dark:text-gray-100 text-center">
            {tech.name}
          </span>
        </div>
      </div>
    ))}
  </div>
</div>

<style>
  @keyframes marquee-smooth {
    0% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(-33.333%);
    }
  }

  @keyframes marquee-reverse {
    0% {
      transform: translateX(-33.333%);
    }
    100% {
      transform: translateX(0%);
    }
  }

  .animate-marquee-smooth {
    animation: marquee-smooth 40s linear infinite;
    display: flex;
    will-change: transform;
  }

  .animate-marquee-reverse {
    animation: marquee-reverse 35s linear infinite;
    display: flex;
    will-change: transform;
  }

  .tech-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform-style: preserve-3d;
    will-change: transform;
  }

  .tech-card:hover {
    transform: translateY(-8px) rotateY(5deg);
    box-shadow: 
      0 20px 25px -5px rgba(0, 0, 0, 0.1),
      0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }

  /* Pausa la animación al hacer hover */
  .animate-marquee-smooth:hover,
  .animate-marquee-reverse:hover {
    animation-play-state: paused;
  }

  /* Mejoras para modo oscuro */
  @media (prefers-color-scheme: dark) {
    .tech-card:hover {
      box-shadow: 
        0 20px 25px -5px rgba(0, 0, 0, 0.3),
        0 10px 10px -5px rgba(0, 0, 0, 0.2);
    }
  }

  /* Responsive */
  @media (max-width: 768px) {
    .tech-card {
      min-width: 100px;
      padding: 0.75rem;
    }
    
    .tech-card img {
      height: 2.5rem;
      width: 2.5rem;
    }
  }
</style>
