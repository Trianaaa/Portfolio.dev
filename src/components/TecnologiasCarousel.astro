---
const technologies = [
  { name: "HTML", icon: "/tech/html.svg", category: "Frontend", color: "from-orange-500 to-red-500" },
  { name: "CSS", icon: "/tech/css.svg", category: "Frontend", color: "from-blue-500 to-cyan-500" },
  { name: "JavaScript", icon: "/tech/javascript.svg", category: "Frontend", color: "from-yellow-400 to-yellow-600" },
  { name: "TypeScript", icon: "/tech/typescript.svg", category: "Frontend", color: "from-blue-600 to-blue-800" },
  { name: "React", icon: "/tech/react.svg", category: "Frontend", color: "from-cyan-400 to-blue-500" },
  { name: "Node.js", icon: "/tech/node.svg", category: "Backend", color: "from-green-500 to-emerald-600" },
  { name: "Python", icon: "/tech/python.svg", category: "Backend", color: "from-blue-500 to-yellow-500" },
  { name: "Git", icon: "/tech/git.svg", category: "Tools", color: "from-orange-600 to-red-600" },
  { name: "MongoDB", icon: "/tech/mongodb.svg", category: "Database", color: "from-green-600 to-emerald-700" },
  { name: "PostgreSQL", icon: "/tech/postgresql.svg", category: "Database", color: "from-blue-600 to-indigo-700" },
  { name: "Docker", icon: "/tech/docker.svg", category: "DevOps", color: "from-blue-500 to-cyan-600" },
  { name: "Kubernetes", icon: "/tech/kubernetes.svg", category: "DevOps", color: "from-blue-600 to-indigo-700" },
  { name: "Next.js", icon: "/tech/nextjs.svg", category: "Frontend", color: "from-gray-900 to-black" },
  { name: "Astro", icon: "/tech/astro.svg", category: "Frontend", color: "from-orange-500 to-pink-500" },
  { name: "Tailwind CSS", icon: "/tech/tailwindcss.svg", category: "Frontend", color: "from-cyan-400 to-blue-500" },
  { name: "Bootstrap", icon: "/tech/bootstrap.svg", category: "Frontend", color: "from-purple-600 to-indigo-700" },
  { name: "Vue.js", icon: "/tech/vue.svg", category: "Frontend", color: "from-green-500 to-emerald-600" },
  { name: "Angular", icon: "/tech/angular.svg", category: "Frontend", color: "from-red-600 to-red-700" },
  { name: "NestJS", icon: "/tech/nestjs.svg", category: "Backend", color: "from-red-600 to-pink-600" },
];

// Triplicamos para un carrusel más fluido
const tripled = [...technologies, ...technologies, ...technologies];

// Función para obtener el color del badge basado en el color de la tecnología
function getBadgeColor(color) {
  // Extraer el color principal del gradiente
  if (color.includes("orange")) return "bg-orange-500/30 text-orange-800 dark:text-orange-200 border-orange-500/50";
  if (color.includes("red")) return "bg-red-500/30 text-red-800 dark:text-red-200 border-red-500/50";
  if (color.includes("blue") && color.includes("cyan")) return "bg-cyan-500/30 text-cyan-800 dark:text-cyan-200 border-cyan-500/50";
  if (color.includes("blue")) return "bg-blue-500/30 text-blue-800 dark:text-blue-200 border-blue-500/50";
  if (color.includes("yellow")) return "bg-yellow-500/30 text-yellow-800 dark:text-yellow-200 border-yellow-500/50";
  if (color.includes("green") || color.includes("emerald")) return "bg-emerald-500/30 text-emerald-800 dark:text-emerald-200 border-emerald-500/50";
  if (color.includes("purple") || color.includes("indigo")) return "bg-purple-500/30 text-purple-800 dark:text-purple-200 border-purple-500/50";
  if (color.includes("pink")) return "bg-pink-500/30 text-pink-800 dark:text-pink-200 border-pink-500/50";
  if (color.includes("gray") || color.includes("black")) return "bg-gray-500/30 text-gray-800 dark:text-gray-200 border-gray-500/50";
  return "bg-gray-500/30 text-gray-800 dark:text-gray-200 border-gray-500/50";
}
---

<section class="relative w-full overflow-hidden py-16">

  <!-- Carrusel principal -->
  <div class="relative mb-12">
    <div class="flex gap-6 animate-marquee-smooth">
      {tripled.map((tech, index) => (
        <div
          key={index}
          class="flex-shrink-0 group cursor-pointer"
        >
          <div class="tech-card relative flex flex-col items-center justify-center w-36 h-44 rounded-3xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl border border-gray-200/60 dark:border-gray-700/60 shadow-xl hover:shadow-2xl transition-all duration-500 overflow-hidden">
            
            <!-- Animated background gradient -->
            <div class={`absolute inset-0 bg-gradient-to-br ${tech.color} opacity-0 group-hover:opacity-10 transition-opacity duration-500`}></div>
            
            <!-- Glow effect on hover -->
            <div class={`absolute inset-0 bg-gradient-to-br ${tech.color} opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500 -z-10`}></div>
            
            <!-- Category badge with technology-specific color -->
            <div class={`absolute top-2 right-2 px-3 py-1.5 text-[10px] font-bold rounded-full border-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform group-hover:scale-110 scale-95 shadow-lg ${getBadgeColor(tech.color)}`}>
              {tech.category}
            </div>
            
            <!-- Icon container with enhanced design -->
            <div class="relative mb-4 p-4 bg-white/90 dark:bg-gray-900/90 rounded-2xl shadow-lg group-hover:scale-110 group-hover:rotate-3 transition-all duration-500 z-10">
              <div class={`absolute inset-0 bg-gradient-to-br ${tech.color} opacity-0 group-hover:opacity-10 rounded-2xl transition-opacity duration-500`}></div>
              <img
                src={tech.icon}
                alt={`${tech.name} icon`}
                class="relative w-14 h-14 object-contain z-10"
                loading="lazy"
              />
            </div>
            
            <!-- Tech name with better typography -->
            <span class={`text-sm font-bold text-gray-700 dark:text-gray-200 text-center px-3 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r ${tech.color} transition-all duration-300 z-10`}>
              {tech.name}
            </span>
            
            <!-- Bottom accent line with gradient -->
            <div class={`absolute bottom-0 left-0 right-0 h-1.5 bg-gradient-to-r ${tech.color} transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 rounded-b-3xl`}></div>
            
            <!-- Corner accent -->
            <div class={`absolute top-0 right-0 w-16 h-16 bg-gradient-to-br ${tech.color} opacity-0 group-hover:opacity-5 rounded-bl-full transition-opacity duration-500`}></div>
          </div>
        </div>
      ))}
    </div>
  </div>
  
  <!-- Carrusel secundario (dirección opuesta) -->
  <div class="relative">
    <div class="flex gap-6 animate-marquee-reverse">
      {tripled.slice().reverse().map((tech, index) => (
        <div
          key={index}
          class="flex-shrink-0 group cursor-pointer"
        >
          <div class="tech-card-reverse relative flex flex-col items-center justify-center w-36 h-44 rounded-3xl bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl border border-gray-200/60 dark:border-gray-700/60 shadow-xl hover:shadow-2xl transition-all duration-500 overflow-hidden">
            
            <!-- Animated background gradient -->
            <div class={`absolute inset-0 bg-gradient-to-br ${tech.color} opacity-0 group-hover:opacity-10 transition-opacity duration-500`}></div>
            
            <!-- Glow effect on hover -->
            <div class={`absolute inset-0 bg-gradient-to-br ${tech.color} opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500 -z-10`}></div>
            
            <!-- Category badge with technology-specific color -->
            <div class={`absolute top-2 right-2 px-3 py-1.5 text-[10px] font-bold rounded-full border-2 opacity-0 group-hover:opacity-100 transition-all duration-300 transform group-hover:scale-110 scale-95 shadow-lg ${getBadgeColor(tech.color)}`}>
              {tech.category}
            </div>
            
            <!-- Icon container with enhanced design -->
            <div class="relative mb-4 p-4 bg-white/90 dark:bg-gray-900/90 rounded-2xl shadow-lg group-hover:scale-110 group-hover:-rotate-3 transition-all duration-500 z-10">
              <div class={`absolute inset-0 bg-gradient-to-br ${tech.color} opacity-0 group-hover:opacity-10 rounded-2xl transition-opacity duration-500`}></div>
              <img
                src={tech.icon}
                alt={`${tech.name} icon`}
                class="relative w-14 h-14 object-contain z-10"
                loading="lazy"
              />
            </div>
            
            <!-- Tech name with better typography -->
            <span class={`text-sm font-bold text-gray-700 dark:text-gray-200 text-center px-3 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r ${tech.color} transition-all duration-300 z-10`}>
              {tech.name}
            </span>
            
            <!-- Bottom accent line with gradient -->
            <div class={`absolute bottom-0 left-0 right-0 h-1.5 bg-gradient-to-r ${tech.color} transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 rounded-b-3xl`}></div>
            
            <!-- Corner accent -->
            <div class={`absolute top-0 left-0 w-16 h-16 bg-gradient-to-br ${tech.color} opacity-0 group-hover:opacity-5 rounded-br-full transition-opacity duration-500`}></div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  @keyframes marquee-smooth {
    0% {
      transform: translateX(0%);
    }
    100% {
      transform: translateX(-33.333%);
    }
  }

  @keyframes marquee-reverse {
    0% {
      transform: translateX(-33.333%);
    }
    100% {
      transform: translateX(0%);
    }
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .animate-marquee-smooth {
    animation: marquee-smooth 60s linear infinite;
    display: flex;
    will-change: transform;
  }

  .animate-marquee-reverse {
    animation: marquee-reverse 55s linear infinite;
    display: flex;
    will-change: transform;
  }

  .tech-card,
  .tech-card-reverse {
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }

  .tech-card:hover {
    transform: translateY(-12px) scale(1.05);
    border-color: rgba(59, 130, 246, 0.3);
  }

  .tech-card-reverse:hover {
    transform: translateY(-12px) scale(1.05);
    border-color: rgba(147, 51, 234, 0.3);
  }

  /* Pausa la animación al hacer hover en el contenedor */
  .animate-marquee-smooth:hover,
  .animate-marquee-reverse:hover {
    animation-play-state: paused;
  }

  /* Subtle floating animation for cards */
  .tech-card:nth-child(odd) {
    animation: float 6s ease-in-out infinite;
    animation-delay: 0s;
  }

  .tech-card:nth-child(even) {
    animation: float 6s ease-in-out infinite;
    animation-delay: 3s;
  }

  .tech-card-reverse:nth-child(odd) {
    animation: float 7s ease-in-out infinite;
    animation-delay: 1.5s;
  }

  .tech-card-reverse:nth-child(even) {
    animation: float 7s ease-in-out infinite;
    animation-delay: 4.5s;
  }

  /* Enhanced hover pause for individual cards */
  .tech-card:hover,
  .tech-card-reverse:hover {
    animation-play-state: paused;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .tech-card,
    .tech-card-reverse {
      width: 8rem;
      height: 10rem;
    }
    
    .tech-card img,
    .tech-card-reverse img {
      width: 3rem;
      height: 3rem;
    }

    .animate-marquee-smooth {
      animation-duration: 40s;
    }

    .animate-marquee-reverse {
      animation-duration: 35s;
    }

    section {
      padding-top: 2rem;
      padding-bottom: 2rem;
    }
  }

  @media (max-width: 480px) {
    .tech-card,
    .tech-card-reverse {
      width: 7rem;
      height: 9rem;
    }
    
    .tech-card img,
    .tech-card-reverse img {
      width: 2.5rem;
      height: 2.5rem;
    }

    .flex.gap-6 {
      gap: 1rem;
    }
  }

  /* Smooth scroll behavior */
  @media (prefers-reduced-motion: reduce) {
    .animate-marquee-smooth,
    .animate-marquee-reverse,
    .tech-card,
    .tech-card-reverse {
      animation: none;
    }
  }
</style>
